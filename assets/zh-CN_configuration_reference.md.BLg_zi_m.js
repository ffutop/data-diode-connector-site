import{_ as c,I as i,c as f,o as a,a6 as h,j as e,b as r,a as l,w as d,J as n,a8 as s}from"./chunks/framework.Cpr3xyXy.js";const P=JSON.parse('{"title":"网闸连接器配置参考手册 - Helm & Docker","description":"全面的网闸连接器 (DDC) 配置指南。详解 Helm values.yaml 和 Docker 环境变量，涵盖 Kafka/UDP 协议适配、传输层流控、安全过滤器及日志监控配置。","frontmatter":{"title":"网闸连接器配置参考手册 - Helm & Docker","description":"全面的网闸连接器 (DDC) 配置指南。详解 Helm values.yaml 和 Docker 环境变量，涵盖 Kafka/UDP 协议适配、传输层流控、安全过滤器及日志监控配置。","head":[["meta",{"name":"keywords","content":"网闸配置, Helm Chart, Docker Compose, Kafka配置, UDP配置, 流控参数, 安全过滤, 日志配置"}]],"seo":{"proficiencyLevel":"Intermediate","keywords":["Configuration Reference","Helm Values","Docker Environment Variables","Protocol Handler","Transport Layer"]}},"headers":[],"relativePath":"zh-CN/configuration_reference.md","filePath":"zh-CN/configuration_reference.md","lastUpdated":1764595667000}'),g={name:"zh-CN/configuration_reference.md"};function y(p,t,x,u,k,b){const o=i("Mermaid");return a(),f("div",null,[t[4]||(t[4]=h('<h1 id="配置参考手册" tabindex="-1">配置参考手册 <a class="header-anchor" href="#配置参考手册" aria-label="Permalink to “配置参考手册”">​</a></h1><p>本工程目前推荐使用 <strong>Kubernetes (Helm)</strong> 或 <strong>Docker Compose</strong> 进行部署。</p><p>本文档基于 Helm Chart 的 <code>values.yaml</code> 结构进行说明，这些参数定义了各个微服务组件（<a href="/zh-CN/software_architecture">入口代理/出口代理</a>、协议处理、传输层）的行为。在使用 Docker Compose 时，这些参数通常映射为环境变量或启动命令参数。</p><p>您可以在 ArtifactHub 上找到对应的 Helm Charts：</p><ul><li><a href="https://artifacthub.io/packages/helm/ffutop/data-diode-connector-ingress" target="_blank" rel="noreferrer">入口代理 Helm Chart</a></li><li><a href="https://artifacthub.io/packages/helm/ffutop/data-diode-connector-egress" target="_blank" rel="noreferrer">出口代理 Helm Chart</a></li></ul><h2 id="入口代理配置" tabindex="-1">入口代理配置 <a class="header-anchor" href="#入口代理配置" aria-label="Permalink to “入口代理配置”">​</a></h2><p><a href="/zh-CN/software_architecture#逻辑架构拓扑">入口代理</a>部署在网闸的发送侧（高安全区/源端），负责从源系统接收数据，进行可选的过滤，并通过 UDP 单向发送给网闸。</p><h3 id="核心协议配置-protocolhandler" tabindex="-1">核心协议配置 (<code>protocolHandler</code>) <a class="header-anchor" href="#核心协议配置-protocolhandler" aria-label="Permalink to “核心协议配置 (protocolHandler)”">​</a></h3><p>决定入口端如何从外部系统“摄入”数据。通过 <code>protocolHandler.type</code> 选择模式。</p><p><strong>通用参数：</strong></p><ul><li><code>type</code>: 协议类型，可选值为 <code>&quot;kafka&quot;</code> 或 <code>&quot;udp&quot;</code>。</li></ul><h4 id="kafka-模式-protocolhandler-kafka" tabindex="-1">Kafka 模式 (<code>protocolHandler.kafka</code>) <a class="header-anchor" href="#kafka-模式-protocolhandler-kafka" aria-label="Permalink to “Kafka 模式 (protocolHandler.kafka)”">​</a></h4><p>适用于从 Kafka 主题消费数据。</p><table tabindex="0"><thead><tr><th style="text-align:left;">参数 (Key)</th><th style="text-align:left;">默认值</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:left;"><code>hostKafkaServer</code></td><td style="text-align:left;"><code>&quot;kafka.kafka.svc.cluster.local&quot;</code></td><td style="text-align:left;">源 Kafka Broker 的地址。</td></tr><tr><td style="text-align:left;"><code>portKafkaServer</code></td><td style="text-align:left;"><code>9092</code></td><td style="text-align:left;">源 Kafka Broker 的端口。</td></tr><tr><td style="text-align:left;"><code>topicName</code></td><td style="text-align:left;"><code>&quot;TestTopic&quot;</code></td><td style="text-align:left;">要订阅/消费的 Kafka 主题名称。</td></tr><tr><td style="text-align:left;"><code>maxBytesPerPartition</code></td><td style="text-align:left;"><code>1000000</code></td><td style="text-align:left;">每次从 Kafka 分区获取的最大字节数。</td></tr><tr><td style="text-align:left;"><code>bipBufferElementCount</code></td><td style="text-align:left;"><code>2</code></td><td style="text-align:left;">内部<a href="/zh-CN/software_architecture#无锁缓冲-bipbuffer">环形缓冲区</a>大小（单位：元素个数，每元素约 1MB）。</td></tr><tr><td style="text-align:left;"><code>statsServerAddress</code></td><td style="text-align:left;"><code>&quot;0.0.0.0&quot;</code></td><td style="text-align:left;"><a href="/zh-CN/operations_guide#指标-statsd">StatsD</a> 统计服务器地址。</td></tr><tr><td style="text-align:left;"><code>statsServerPort</code></td><td style="text-align:left;"><code>8081</code></td><td style="text-align:left;">StatsD 统计服务器端口。</td></tr></tbody></table><h4 id="udp-模式-protocolhandler-udp" tabindex="-1">UDP 模式 (<code>protocolHandler.udp</code>) <a class="header-anchor" href="#udp-模式-protocolhandler-udp" aria-label="Permalink to “UDP 模式 (protocolHandler.udp)”">​</a></h4><p>适用于接收原始 UDP 数据包。</p><table tabindex="0"><thead><tr><th style="text-align:left;">参数 (Key)</th><th style="text-align:left;">默认值</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:left;"><code>listeningPort</code></td><td style="text-align:left;"><code>1235</code></td><td style="text-align:left;">监听外部 UDP 数据输入的本地端口。</td></tr><tr><td style="text-align:left;"><code>bipBufferElementCount</code></td><td style="text-align:left;"><code>10</code></td><td style="text-align:left;">内部环形缓冲区大小。</td></tr></tbody></table><h3 id="传输层发送配置-transportudpsend" tabindex="-1">传输层发送配置 (<code>transportUdpSend</code>) <a class="header-anchor" href="#传输层发送配置-transportudpsend" aria-label="Permalink to “传输层发送配置 (transportUdpSend)”">​</a></h3><p>配置如何将数据封装并通过单向链路发送。</p><table tabindex="0"><thead><tr><th style="text-align:left;">参数 (Key)</th><th style="text-align:left;">默认值</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:left;"><code>senderAddress</code></td><td style="text-align:left;"><code>&quot;0.0.0.0&quot;</code></td><td style="text-align:left;">发送进程绑定的本地 IP。</td></tr><tr><td style="text-align:left;"><code>senderPort</code></td><td style="text-align:left;"><code>33333</code></td><td style="text-align:left;">发送进程绑定的本地端口。</td></tr><tr><td style="text-align:left;"><code>receiverAddress</code></td><td style="text-align:left;"><code>&quot;0.0.0.0&quot;</code></td><td style="text-align:left;"><strong>目标 IP</strong>：网闸对端（Egress 端）或物理网闸设备的接收 IP。</td></tr><tr><td style="text-align:left;"><code>receiverPort</code></td><td style="text-align:left;"><code>1234</code></td><td style="text-align:left;"><strong>目标端口</strong>：网闸对端的接收端口。</td></tr><tr><td style="text-align:left;"><code>sendDelayMs</code></td><td style="text-align:left;"><code>5</code></td><td style="text-align:left;"><strong><a href="/zh-CN/flow_control">流控延迟</a></strong>：每发送一个 UDP 包后的等待时间（毫秒）。用于防止压垮物理网闸或接收端。</td></tr><tr><td style="text-align:left;"><code>bipBufferElementCount</code></td><td style="text-align:left;"><code>10</code></td><td style="text-align:left;">传输层缓冲区大小。</td></tr></tbody></table><h3 id="过滤器配置-filters" tabindex="-1">过滤器配置 (<code>filters</code>) <a class="header-anchor" href="#过滤器配置-filters" aria-label="Permalink to “过滤器配置 (filters)”">​</a></h3><p>可选的<a href="/zh-CN/security_model">安全过滤层</a>，可配置多个过滤器。</p><table tabindex="0"><thead><tr><th style="text-align:left;">参数 (Key)</th><th style="text-align:left;">默认值</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:left;"><code>enabled</code></td><td style="text-align:left;"><code>false</code></td><td style="text-align:left;">是否启用此过滤器。</td></tr><tr><td style="text-align:left;"><code>wordToFilter</code></td><td style="text-align:left;"><code>&quot;secret&quot;</code></td><td style="text-align:left;">关键词过滤：包含此字符串的数据包将被丢弃。</td></tr><tr><td style="text-align:left;"><code>maxMessageSize</code></td><td style="text-align:left;"><code>1050000</code></td><td style="text-align:left;">允许的最大消息大小（字节），超过将被丢弃。</td></tr></tbody></table><h2 id="出口代理配置" tabindex="-1">出口代理配置 <a class="header-anchor" href="#出口代理配置" aria-label="Permalink to “出口代理配置”">​</a></h2><p><a href="/zh-CN/software_architecture#逻辑架构拓扑">出口代理</a>部署在网闸的接收侧（低安全区/目的端），负责监听来自网闸的 UDP 流量，重组数据包，并转发给目标系统。</p><h3 id="传输层接收配置-transportudpreceive" tabindex="-1">传输层接收配置 (<code>transportUdpReceive</code>) <a class="header-anchor" href="#传输层接收配置-transportudpreceive" aria-label="Permalink to “传输层接收配置 (transportUdpReceive)”">​</a></h3><p>负责接收原始的单向 UDP 数据流并进行重组。</p><table tabindex="0"><thead><tr><th style="text-align:left;">参数 (Key)</th><th style="text-align:left;">默认值</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:left;"><code>receiverAddress</code></td><td style="text-align:left;"><code>&quot;0.0.0.0&quot;</code></td><td style="text-align:left;">监听绑定的本地 IP。</td></tr><tr><td style="text-align:left;"><code>receiverPort</code></td><td style="text-align:left;"><code>1234</code></td><td style="text-align:left;"><strong>监听端口</strong>：必须与 Ingress 端配置的 <code>receiverPort</code> 一致（经由网闸映射）。</td></tr><tr><td style="text-align:left;"><code>bipBufferElementCount</code></td><td style="text-align:left;"><code>10</code></td><td style="text-align:left;">重组缓冲区大小，需足够大以处理分片重组。</td></tr></tbody></table><h3 id="核心协议配置-protocolhandler-1" tabindex="-1">核心协议配置 (<code>protocolHandler</code>) <a class="header-anchor" href="#核心协议配置-protocolhandler-1" aria-label="Permalink to “核心协议配置 (protocolHandler)”">​</a></h3><p>决定出口端如何将数据“转发”给目标系统。通过 <code>protocolHandler.type</code> 选择模式。</p><p><strong>通用参数：</strong></p><ul><li><code>type</code>: 协议类型，可选值为 <code>&quot;kafka&quot;</code> 或 <code>&quot;udp&quot;</code>。</li></ul><h4 id="kafka-模式-protocolhandler-kafka-1" tabindex="-1">Kafka 模式 (<code>protocolHandler.kafka</code>) <a class="header-anchor" href="#kafka-模式-protocolhandler-kafka-1" aria-label="Permalink to “Kafka 模式 (protocolHandler.kafka)”">​</a></h4><p>适用于将数据写入目标 Kafka 集群。</p><table tabindex="0"><thead><tr><th style="text-align:left;">参数 (Key)</th><th style="text-align:left;">默认值</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:left;"><code>hostKafkaServer</code></td><td style="text-align:left;"><code>&quot;kafka.kafka.svc.cluster.local&quot;</code></td><td style="text-align:left;">目标 Kafka Broker 的地址。</td></tr><tr><td style="text-align:left;"><code>portKafkaServer</code></td><td style="text-align:left;"><code>9092</code></td><td style="text-align:left;">目标 Kafka Broker 的端口。</td></tr><tr><td style="text-align:left;"><code>inReplacement</code></td><td style="text-align:left;"><code>&quot;TestTopic&quot;</code></td><td style="text-align:left;">（可选）源主题重映射匹配串。</td></tr><tr><td style="text-align:left;"><code>outReplacement</code></td><td style="text-align:left;"><code>&quot;FinalTestTopic&quot;</code></td><td style="text-align:left;">（可选）写入目标 Kafka 时的实际主题名称。</td></tr></tbody></table><h4 id="udp-模式-protocolhandler-udp-1" tabindex="-1">UDP 模式 (<code>protocolHandler.udp</code>) <a class="header-anchor" href="#udp-模式-protocolhandler-udp-1" aria-label="Permalink to “UDP 模式 (protocolHandler.udp)”">​</a></h4><p>适用于将数据以 UDP 包形式转发给后端服务。</p><table tabindex="0"><thead><tr><th style="text-align:left;">参数 (Key)</th><th style="text-align:left;">默认值</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:left;"><code>udpReceiverHost</code></td><td style="text-align:left;"><code>&quot;127.0.0.1&quot;</code></td><td style="text-align:left;">后端目标服务的 IP 地址。</td></tr><tr><td style="text-align:left;"><code>udpReceiverPort</code></td><td style="text-align:left;"><code>8125</code></td><td style="text-align:left;">后端目标服务的端口。</td></tr></tbody></table><h2 id="通用运维配置" tabindex="-1">通用运维配置 <a class="header-anchor" href="#通用运维配置" aria-label="Permalink to “通用运维配置”">​</a></h2><p>以下参数适用于入口代理和出口代理的所有组件：</p><table tabindex="0"><thead><tr><th style="text-align:left;">参数 (Key)</th><th style="text-align:left;">默认值</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:left;"><code>logLevel</code></td><td style="text-align:left;"><code>&quot;Warn&quot;</code></td><td style="text-align:left;">日志级别。可选值：<code>Trace</code>, <code>Debug</code>, <code>Info</code>, <code>Warn</code>, <code>Error</code>。</td></tr><tr><td style="text-align:left;"><code>fromHostSysLog</code></td><td style="text-align:left;"><code>&quot;0.0.0.0&quot;</code></td><td style="text-align:left;">发送 <a href="/zh-CN/operations_guide#syslog">Syslog</a> 的源绑定地址。</td></tr><tr><td style="text-align:left;"><code>toHostSysLog</code></td><td style="text-align:left;"><code>&quot;127.0.0.1&quot;</code></td><td style="text-align:left;">集中式 Syslog 服务器地址。</td></tr><tr><td style="text-align:left;"><code>toPortSysLog</code></td><td style="text-align:left;"><code>8082</code></td><td style="text-align:left;">集中式 Syslog 服务器端口。</td></tr><tr><td style="text-align:left;"><code>images.&lt;component&gt;.repository</code></td><td style="text-align:left;">-</td><td style="text-align:left;">各组件的 Docker 镜像仓库地址。</td></tr><tr><td style="text-align:left;"><code>images.&lt;component&gt;.tag</code></td><td style="text-align:left;"><code>&quot;latest&quot;</code></td><td style="text-align:left;">镜像标签版本。</td></tr></tbody></table><h2 id="部署架构参考" tabindex="-1">部署架构参考 <a class="header-anchor" href="#部署架构参考" aria-label="Permalink to “部署架构参考”">​</a></h2><p>在典型的 Kubernetes 或 Docker Compose 部署中，服务映射关系如下：</p>',43)),e("ul",null,[e("li",null,[t[1]||(t[1]=e("p",null,[e("strong",null,"Ingress Pod/Container"),l(":")],-1)),(a(),r(s,null,{default:d(()=>[n(o,{id:"mermaid-626",class:"mermaid",graph:"%25%25%7Binit%3A%20%7B%20%22themeVariables%22%3A%20%7B%20%22clusterBkg%22%3A%20%22%23ffffff%22%2C%20%22clusterBorder%22%3A%20%22%23424242%22%20%7D%7D%7D%25%25%0Agraph%20LR%0AA%5B%22protocol_handler%20(Kafka%2FUDP)%22%5D%20--%3EB%5B%22filter%20(%E5%8F%AF%E9%80%89)%22%5D%20--%3E%20C%5Btransport_udp_send%5D%0AclassDef%20darkStyle%20fill%3A%23ffffff%2Cstroke%3A%23424242%2Ccolor%3A%23424242%2Cstroke-width%3A2px%0Aclass%20A%2CB%2CC%20darkStyle%3B%0A"})]),fallback:d(()=>[...t[0]||(t[0]=[l(" Loading... ",-1)])]),_:1}))]),e("li",null,[t[3]||(t[3]=e("p",null,[e("strong",null,"Egress Pod/Container"),l(":")],-1)),(a(),r(s,null,{default:d(()=>[n(o,{id:"mermaid-632",class:"mermaid",graph:"%25%25%7Binit%3A%20%7B%20%22themeVariables%22%3A%20%7B%20%22clusterBkg%22%3A%20%22%23ffffff%22%2C%20%22clusterBorder%22%3A%20%22%23424242%22%20%7D%7D%7D%25%25%0Agraph%20LR%0AA%5Btransport_udp_receive%5D%20--%3E%20B%5B%22filter%20(%E5%8F%AF%E9%80%89)%22%5D%20--%3E%20C%5B%22protocol_handler%20(Kafka%2FUDP)%22%5D%0AclassDef%20darkStyle%20fill%3A%23ffffff%2Cstroke%3A%23424242%2Ccolor%3A%23424242%2Cstroke-width%3A2px%0Aclass%20A%2CB%2CC%20darkStyle%3B%0A"})]),fallback:d(()=>[...t[2]||(t[2]=[l(" Loading... ",-1)])]),_:1}))])]),t[5]||(t[5]=e("p",null,[l("配置修改主要通过修改 Helm 的 "),e("code",null,"values.yaml"),l(" 文件或覆盖相应的 Docker 环境变量来实现。")],-1))])}const D=c(g,[["render",y]]);export{P as __pageData,D as default};
