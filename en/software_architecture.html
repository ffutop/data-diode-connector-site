<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DDC Software Architecture - Rust &amp; Lock-Free Design | Data Diode Connector</title>
    <meta name="description" content="Technical deep dive into Data Diode Connector (DDC) software architecture. Explains the Ingress/Egress split, Lock-free Ring Buffers (BipBuffer), Threading Model, and the Filter Pipeline.">
    <meta name="generator" content="VitePress v2.0.0-alpha.15">
    <link rel="preload stylesheet" href="/assets/style._8r3gAuK.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.PJ_ekdpa.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.Cpr3xyXy.js">
    <link rel="modulepreload" href="/assets/chunks/theme.Cf7LEyu3.js">
    <link rel="modulepreload" href="/assets/en_software_architecture.md.ONgI8uxF.lean.js">
    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Risque&amp;display=swap">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-CXJFXYK0H6"></script>
    <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-CXJFXYK0H6");</script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
    <meta name="keywords" content="Software Architecture, Rust, Data Diode, Lock-free Buffer, BipBuffer, Ingress Proxy, Egress Proxy, Zero Copy">
    <link rel="canonical" href="https://data-diode-connector.ffutop.com/en/software_architecture">
    <link rel="alternate" hreflang="zh-CN" href="https://data-diode-connector.ffutop.com/zh-CN/software_architecture">
    <link rel="alternate" hreflang="en" href="https://data-diode-connector.ffutop.com/en/software_architecture">
    <meta property="og:site_name" content="Data Diode Connector">
    <meta property="og:title" content="DDC Software Architecture - Rust &amp; Lock-Free Design | Data Diode Connector">
    <meta property="og:description" content="Technical deep dive into Data Diode Connector (DDC) software architecture. Explains the Ingress/Egress split, Lock-free Ring Buffers (BipBuffer), Threading Model, and the Filter Pipeline.">
    <meta property="og:url" content="https://data-diode-connector.ffutop.com/en/software_architecture">
    <meta property="og:image" content="https://data-diode-connector.ffutop.com/og-image.png">
    <meta name="twitter:image" content="https://data-diode-connector.ffutop.com/og-image.png">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="DDC Software Architecture - Rust &amp; Lock-Free Design">
    <meta name="twitter:description" content="Technical deep dive into Data Diode Connector (DDC) software architecture. Explains the Ingress/Egress split, Lock-free Ring Buffers (BipBuffer), Threading Model, and the Filter Pipeline.">
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"TechArticle","headline":"DDC Software Architecture - Rust & Lock-Free Design","image":["https://data-diode-connector.ffutop.com/og-image.png"],"datePublished":"2025-11-28T08:00:00+08:00","dateModified":"2025-12-01T13:27:47.000Z","author":{"@type":"Person","name":"ffutop","url":"https://data-diode-connector.ffutop.com"},"proficiencyLevel":"Expert","about":[{"@type":"Thing","name":"Software Architecture"},{"@type":"Thing","name":"Rust Programming"},{"@type":"Thing","name":"Lock-free Concurrency"},{"@type":"Thing","name":"Zero Copy"},{"@type":"Thing","name":"Pipeline Design"}]}</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-304c8b69><!--[--><!--]--><!--[--><span tabindex="-1" data-v-10d4d845></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-10d4d845>Skip to content</a><!--]--><!----><header class="VPNav" data-v-304c8b69 data-v-604a0865><div class="VPNavBar" data-v-604a0865 data-v-18128346><div class="wrapper" data-v-18128346><div class="container" data-v-18128346><div class="title" data-v-18128346><div class="VPNavBarTitle has-sidebar" data-v-18128346 data-v-d4488dd0><a class="title" href="/en/" data-v-d4488dd0><!--[--><!--]--><!----><span data-v-d4488dd0>Data Diode Connector</span><!--[--><!--]--></a></div></div><div class="content" data-v-18128346><div class="content-body" data-v-18128346><!--[--><!--]--><div class="VPNavBarSearch search" data-v-18128346><!--[--><!----><div id="local-search"><button type="button" aria-label="Search" aria-keyshortcuts="/ control+k meta+k" class="DocSearch DocSearch-Button"><span class="DocSearch-Button-Container"><span class="vpi-search DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key"></kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-18128346 data-v-020be4db><span id="main-nav-aria-label" class="visually-hidden" data-v-020be4db> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/en/" tabindex="0" data-v-020be4db data-v-81dba28a><!--[--><span data-v-81dba28a>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/en/software_architecture" tabindex="0" data-v-020be4db data-v-81dba28a><!--[--><span data-v-81dba28a>Guide</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/en/configuration_reference" tabindex="0" data-v-020be4db data-v-81dba28a><!--[--><span data-v-81dba28a>Config</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/en/download" tabindex="0" data-v-020be4db data-v-81dba28a><!--[--><span data-v-81dba28a>Download</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/en/commercial" tabindex="0" data-v-020be4db data-v-81dba28a><!--[--><span data-v-81dba28a>Commercial</span><!--]--></a><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-18128346 data-v-e9d6c6e1 data-v-d8fae6e2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="Change language" data-v-d8fae6e2><span class="text" data-v-d8fae6e2><span class="vpi-languages option-icon" data-v-d8fae6e2></span><!----><span class="vpi-chevron-down text-icon" data-v-d8fae6e2></span></span></button><div class="menu" data-v-d8fae6e2><div class="VPMenu" data-v-d8fae6e2 data-v-fcd1d7a8><!----><!--[--><!--[--><div class="items" data-v-e9d6c6e1><p class="title" data-v-e9d6c6e1>English</p><!--[--><div class="VPMenuLink" data-v-e9d6c6e1 data-v-acfa8338><a class="VPLink link" href="/zh-CN/software_architecture" lang="zh-CN" data-v-acfa8338><!--[--><span data-v-acfa8338>简体中文</span><!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-18128346 data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-18128346 data-v-ef6192dc data-v-a1a7286e><!--[--><a class="VPSocialLink no-icon" href="https://github.com/ffutop/DataDiodeConnector" aria-label="github" target="_blank" rel="me noopener" data-v-a1a7286e data-v-32d78712><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-18128346 data-v-600b50c9 data-v-d8fae6e2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-d8fae6e2><span class="vpi-more-horizontal icon" data-v-d8fae6e2></span></button><div class="menu" data-v-d8fae6e2><div class="VPMenu" data-v-d8fae6e2 data-v-fcd1d7a8><!----><!--[--><!--[--><div class="group translations" data-v-600b50c9><p class="trans-title" data-v-600b50c9>English</p><!--[--><div class="VPMenuLink" data-v-600b50c9 data-v-acfa8338><a class="VPLink link" href="/zh-CN/software_architecture" lang="zh-CN" data-v-acfa8338><!--[--><span data-v-acfa8338>简体中文</span><!--]--></a></div><!--]--></div><div class="group" data-v-600b50c9><div class="item appearance" data-v-600b50c9><p class="label" data-v-600b50c9>Appearance</p><div class="appearance-action" data-v-600b50c9><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-600b50c9 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-600b50c9><div class="item social-links" data-v-600b50c9><div class="VPSocialLinks social-links-list" data-v-600b50c9 data-v-a1a7286e><!--[--><a class="VPSocialLink no-icon" href="https://github.com/ffutop/DataDiodeConnector" aria-label="github" target="_blank" rel="me noopener" data-v-a1a7286e data-v-32d78712><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-18128346 data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-18128346><div class="divider-line" data-v-18128346></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-304c8b69 data-v-73add737><div class="container" data-v-73add737><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-73add737><span class="vpi-align-left menu-icon" data-v-73add737></span><span class="menu-text" data-v-73add737>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-73add737 data-v-e28a51a6><button data-v-e28a51a6>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-304c8b69 data-v-49f51a23><div class="curtain" data-v-49f51a23></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-49f51a23><span class="visually-hidden" id="sidebar-aria-label" data-v-49f51a23> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible has-active" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>Architecture</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/en/software_architecture" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Software Architecture</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/en/deployment_topologies" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Deployment Topologies</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/en/security_model" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Security Model</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/en/protocol" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Protocol Specification</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>Operations & Tuning</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/en/configuration_reference" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Configuration Reference</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/en/operations_guide" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Operations Guide</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/en/flow_control" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Flow Control</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/en/kernel_tuning" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Kernel Tuning</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-304c8b69 data-v-bd4f21ea><div class="VPDoc has-sidebar has-aside" data-v-bd4f21ea data-v-d668f7cc><!--[--><!--]--><div class="container" data-v-d668f7cc><div class="aside" data-v-d668f7cc><div class="aside-curtain" data-v-d668f7cc></div><div class="aside-container" data-v-d668f7cc><div class="aside-content" data-v-d668f7cc><div class="VPDocAside" data-v-d668f7cc data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-c8b19031><div class="content" data-v-c8b19031><div class="outline-marker" data-v-c8b19031></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-c8b19031>On this page</div><ul class="VPDocOutlineItem root" data-v-c8b19031 data-v-63c57e50><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-d668f7cc><div class="content-container" data-v-d668f7cc><!--[--><!--]--><main class="main" data-v-d668f7cc><div style="position:relative;" class="vp-doc _en_software_architecture" data-v-d668f7cc><div><h1 id="software-architecture" tabindex="-1">Software Architecture <a class="header-anchor" href="#software-architecture" aria-label="Permalink to “Software Architecture”">​</a></h1><p>The <strong>Data Diode Connector (DDC)</strong> is designed as a high-performance, modular software suite that facilitates secure, unidirectional data transfer. This document outlines the software architecture, component interactions, and data flow principles that drive the system.</p><h2 id="high-level-overview" tabindex="-1">High-Level Overview <a class="header-anchor" href="#high-level-overview" aria-label="Permalink to “High-Level Overview”">​</a></h2><h3 id="logical-topology" tabindex="-1">Logical Topology <a class="header-anchor" href="#logical-topology" aria-label="Permalink to “Logical Topology”">​</a></h3><p>The diagram below illustrates the core topology: Data flows from the <strong>High Security Side (Ingress)</strong>, through the physical data diode, to the <strong>Low Security Side (Egress)</strong>.</p><div class="relative bg-zinc-50/50 border border-zinc-200 rounded-xl my-8 overflow-hidden"><div class="absolute inset-0 opacity-[0.03]" style="background-image:radial-gradient(#000 1px, transparent 1px);background-size:24px 24px;"></div><div class="relative flex flex-col lg:flex-row items-center justify-center gap-8 p-8"><div class="flex flex-col items-center gap-4 z-10 w-full lg:w-auto flex-1"><div class="w-full bg-white rounded-xl border border-zinc-200 shadow-sm p-6 hover:shadow-md transition-shadow"><div class="flex items-center gap-3 mb-4"><div class="p-2 bg-zinc-100 rounded-lg"><i class="fa-solid fa-cloud-arrow-down text-zinc-700"></i></div><div><h3 class="font-semibold text-sm text-zinc-900 !my-0">Ingress Proxy</h3><p class="text-xs text-zinc-500 !my-0">High Security Side</p></div></div><div class="flex flex-wrap justify-start gap-2"><div class="bg-zinc-50 border border-dashed border-zinc-200 rounded flex items-center justify-center px-3 py-2 text-xs text-zinc-500 flex-grow whitespace-nowrap"><i class="fa-brands fa-docker mr-2"></i> Protocol Handler </div><div class="bg-zinc-50 border border-dashed border-zinc-200 rounded flex items-center justify-center px-3 py-2 text-xs text-zinc-500 flex-grow whitespace-nowrap"><i class="fa-solid fa-filter mr-2"></i> Filter Chain </div><div class="bg-zinc-900 text-white rounded flex items-center justify-center px-3 py-2 text-xs font-mono flex-grow whitespace-nowrap"><i class="fa-solid fa-compress-alt mr-2"></i> UDP Encoder </div></div></div></div><div class="flex flex-col items-center gap-2 z-10 flex-shrink-0"><div class="text-xs font-mono text-zinc-400 uppercase tracking-wider mb-1">One Way</div><div class="flex flex-col lg:flex-row items-center gap-0"><div class="w-[2px] h-8 lg:w-16 lg:h-[2px] bg-zinc-300"></div><div class="h-12 w-12 bg-white border-2 border-zinc-900 rounded-full flex items-center justify-center shadow-xl z-20"><i class="fa-solid fa-arrow-down lg:fa-arrow-right text-zinc-900"></i></div><div class="w-[2px] h-8 lg:w-16 lg:h-[2px] bg-zinc-300"></div></div><div class="text-xs font-medium text-zinc-500 mt-2">Network Gap</div></div><div class="flex flex-col items-center gap-4 z-10 w-full lg:w-auto flex-1"><div class="w-full bg-white rounded-xl border border-zinc-200 shadow-sm p-6 hover:shadow-md transition-shadow"><div class="flex items-center gap-3 mb-4"><div class="p-2 bg-zinc-100 rounded-lg"><i class="fa-solid fa-cloud-arrow-up text-zinc-700"></i></div><div><h3 class="font-semibold text-sm text-zinc-900 !my-0">Egress Proxy</h3><p class="text-xs text-zinc-500 !my-0">Low Security Side</p></div></div><div class="flex flex-wrap justify-start gap-2"><div class="bg-zinc-900 text-white rounded flex items-center justify-center px-3 py-2 text-xs font-mono flex-grow whitespace-nowrap"><i class="fa-solid fa-expand-alt mr-2"></i> UDP Decoder </div><div class="bg-zinc-50 border border-dashed border-zinc-200 rounded flex items-center justify-center px-3 py-2 text-xs text-zinc-500 flex-grow whitespace-nowrap"><i class="fa-solid fa-rotate mr-2"></i> Protocol Rebuilder </div><div class="bg-zinc-50 border border-dashed border-zinc-200 rounded flex items-center justify-center px-3 py-2 text-xs text-zinc-500 flex-grow whitespace-nowrap"><i class="fa-solid fa-paper-plane mr-2"></i> Destination </div></div></div></div></div></div><p>The DDC software is split into two distinct, independent applications that never communicate bi-directionally:</p><ol><li><strong>Ingress Proxy (Sender)</strong>: Resides on the High-Security Network (Source). It consumes data from sources (Kafka, UDP, etc.), optionally filters it via <a href="/en/security_model#content-filtering-and-sanitization-dpi">Content Filtering</a>, and pushes it across the data diode.</li><li><strong>Egress Proxy (Receiver)</strong>: Resides on the Low-Security Network (Destination). It listens for data coming from the diode, reassembles it, and delivers it to the target systems.</li></ol><p>Both applications share a common core framework written in <strong>Rust</strong>, prioritizing memory safety, zero-copy data handling, and high concurrency.</p><h2 id="the-pipeline-model" tabindex="-1">The Pipeline Model <a class="header-anchor" href="#the-pipeline-model" aria-label="Permalink to “The Pipeline Model”">​</a></h2><p>Internally, both Ingress and Egress proxies operate on a <strong>Pipeline (Chain)</strong> model. A &quot;Chain&quot; defines a single data stream&#39;s path through the software. You can run multiple chains in parallel within a single process (e.g., multiple Kafka topics being transferred simultaneously).</p><p>A Chain consists of three distinct stages connected by high-performance Ring Buffers (<code>BipBuffer</code>):</p><div class="mermaid"></div><h3 id="_1-protocol-handler" tabindex="-1">1. Protocol Handler <a class="header-anchor" href="#_1-protocol-handler" aria-label="Permalink to “1. Protocol Handler”">​</a></h3><p>The <strong>Protocol Handler</strong> is the interface to the external world.</p><ul><li><strong>Ingress Side</strong>: It acts as a <em>Consumer</em>. It connects to the source system (e.g., connects to a Kafka Broker, binds a UDP port) and reads data. It normalizes this data into a standard internal binary format.</li><li><strong>Egress Side</strong>: It acts as a <em>Producer</em>. It takes the normalized data from the DDC pipeline and formats it for the destination system (e.g., produces messages to a Kafka Broker, sends UDP packets).</li></ul><h3 id="_2-filter-handler-optional" tabindex="-1">2. Filter Handler (Optional) <a class="header-anchor" href="#_2-filter-handler-optional" aria-label="Permalink to “2. Filter Handler (Optional)”">​</a></h3><p>The <strong>Filter Handler</strong> sits in the middle and enforces security policies. It inspects the raw data payload before it is passed to the transport layer.</p><ul><li><strong>Function</strong>: Content inspection, validation, sanitization, or blocking.</li><li><strong>Behavior</strong>: If a packet violates the rule (e.g., contains a &quot;SECRET&quot; keyword), it is dropped immediately and logged.</li><li><strong>Chaining</strong>: Multiple filters can be chained together, each enforcing a different policy.</li></ul><h3 id="_3-transport-handler" tabindex="-1">3. Transport Handler <a class="header-anchor" href="#_3-transport-handler" aria-label="Permalink to “3. Transport Handler”">​</a></h3><p>The <strong>Transport Handler</strong> manages the actual transmission across the air gap / diode.</p><ul><li><strong>Ingress Side (<code>transport-udp-send</code>)</strong>: Takes data from the buffer, fragments it into UDP packets, adds <a href="/en/protocol#header-fields">sequence headers</a>, and blasts it to the diode interface. It implements <a href="/en/flow_control">rate limiting</a> (<code>send_delay_ms</code>) to prevent overwhelming the hardware.</li><li><strong>Egress Side (<code>transport-udp-receive</code>)</strong>: Listens on the diode interface, re-orders packets, checks for gaps (sequence numbers), reassembles the fragments, and writes the complete payload to the next buffer.</li></ul><h2 id="data-flow-memory-management" tabindex="-1">Data Flow &amp; Memory Management <a class="header-anchor" href="#data-flow-memory-management" aria-label="Permalink to “Data Flow &amp; Memory Management”">​</a></h2><p>Performance is critical in a data diode environment because the link is often a bottleneck, and there is no &quot;back-pressure&quot; mechanism (TCP Flow Control) available across the gap.</p><h3 id="lock-free-buffering-bipbuffer" tabindex="-1">Lock-Free Buffering (<code>BipBuffer</code>) <a class="header-anchor" href="#lock-free-buffering-bipbuffer" aria-label="Permalink to “Lock-Free Buffering (BipBuffer)”">​</a></h3><p>DDC uses <strong>SPSC (Single Producer Single Consumer) BipBuffers</strong> (Bipartite Buffers) to pass data between threads.</p><ul><li><strong>Zero-Allocation</strong>: Buffers are pre-allocated at startup.</li><li><strong>Lock-Free</strong>: No Mutexes or Semaphores are used in the hot path, ensuring predictable latency.</li><li><strong>Block/Overwrite</strong>: If the buffer is full (e.g., the Diode is slower than the Kafka source), the Protocol Handler can be configured to either block or overwrite, effectively acting as a software buffer to absorb bursts.</li></ul><h3 id="threading-model" tabindex="-1">Threading Model <a class="header-anchor" href="#threading-model" aria-label="Permalink to “Threading Model”">​</a></h3><p>Each stage of the chain runs in its own dedicated OS thread.</p><ul><li><strong>Protocol Thread</strong>: Handles I/O with the external system.</li><li><strong>Filter/Logic Thread</strong>: Processes CPU-intensive validation.</li><li><strong>Transport Thread</strong>: Dedicated to saturating the network link.</li></ul><p>This separation ensures that a slow filter logic does not necessarily block the network socket immediately, allowing the buffers to absorb the jitter.</p><h2 id="key-design-decisions" tabindex="-1">Key Design Decisions <a class="header-anchor" href="#key-design-decisions" aria-label="Permalink to “Key Design Decisions”">​</a></h2><ol><li><strong>Stateless Core</strong>: The core logic maintains minimal state. State related to packet reassembly is transient and discarded upon error to prevent memory leaks.</li><li><strong>Panic-Proofing</strong>: The architecture is designed to be resilient. Providing error wrapping (using <code>error_chain</code>) to ensure that recoverable errors (like a temporary network glitch) do not crash the entire service.</li><li><strong>Configurable Latency vs. Throughput</strong>: Through <code>bip_buffer_element_count</code> and <code>send_delay_ms</code>, operators can <a href="/en/kernel_tuning">tune the system</a> for low latency (small buffers, low delay) or high throughput (large buffers, batched sends).</li></ol></div></div></main><footer class="VPDocFooter" data-v-d668f7cc data-v-1bcd8184><!--[--><!--]--><div class="edit-info" data-v-1bcd8184><div class="edit-link" data-v-1bcd8184><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/ffutop/DataDiodeConnector/edit/master/docs/en/software_architecture.md" target="_blank" rel="noreferrer" data-v-1bcd8184><!--[--><span class="vpi-square-pen edit-link-icon" data-v-1bcd8184></span> Edit this page on GitHub<!--]--></a></div><div class="last-updated" data-v-1bcd8184><p class="VPLastUpdated" data-v-1bcd8184 data-v-73dafb42>Last updated: <time datetime="2025-12-01T13:27:47.000Z" data-v-73dafb42></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-1bcd8184><span class="visually-hidden" id="doc-footer-aria-label" data-v-1bcd8184>Pager</span><div class="pager" data-v-1bcd8184><!----></div><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link next" href="/en/deployment_topologies" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Next page</span><span class="title" data-v-1bcd8184>Deployment Topologies</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-304c8b69 data-v-5b9946f5><div class="container" data-v-5b9946f5><!----><p class="copyright" data-v-5b9946f5>Copyright © 2025 ffutop</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"en_commercial.md\":\"BYaHp70Q\",\"en_configuration_reference.md\":\"BIonyTNk\",\"en_deployment_topologies.md\":\"CDSMCQz1\",\"en_developer_guide.md\":\"8zuvva2e\",\"en_download.md\":\"DrY8WOyc\",\"en_flow_control.md\":\"CVJWn90L\",\"en_index.md\":\"DPJSWZpR\",\"en_kernel_tuning.md\":\"CBaHaWCd\",\"en_operations_guide.md\":\"BHD_ScFp\",\"en_protocol.md\":\"CqfL27Sa\",\"en_roadmap_optimization_2025.md\":\"DjoBKZ7o\",\"en_security_model.md\":\"OfBLTk3c\",\"en_software_architecture.md\":\"ONgI8uxF\",\"index.md\":\"BL3WeEVR\",\"zh-cn_commercial.md\":\"CGdhi0dd\",\"zh-cn_configuration_reference.md\":\"BLg_zi_m\",\"zh-cn_deployment_topologies.md\":\"DhSN9Yyt\",\"zh-cn_developer_guide.md\":\"B7G_LJ-j\",\"zh-cn_download.md\":\"q-8KOg3o\",\"zh-cn_flow_control.md\":\"BkRs19bs\",\"zh-cn_index.md\":\"c2y98q0G\",\"zh-cn_kernel_tuning.md\":\"D3gl7Zkn\",\"zh-cn_operations_guide.md\":\"R3Kq14h2\",\"zh-cn_protocol.md\":\"D5VXyGBP\",\"zh-cn_security_model.md\":\"Dlzk4zdd\",\"zh-cn_software_architecture.md\":\"DYygVrHg\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Data Diode Connector\",\"description\":\"Secure, high-performance, unidirectional data transfer suite powered by Rust.\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/ffutop/DataDiodeConnector\"}],\"search\":{\"provider\":\"local\"}},\"locales\":{\"root\":{\"label\":\"English\",\"lang\":\"en\",\"link\":\"/en/\",\"themeConfig\":{\"nav\":[{\"text\":\"Home\",\"link\":\"/en/\"},{\"text\":\"Guide\",\"link\":\"/en/software_architecture\"},{\"text\":\"Config\",\"link\":\"/en/configuration_reference\"},{\"text\":\"Download\",\"link\":\"/en/download\"},{\"text\":\"Commercial\",\"link\":\"/en/commercial\"}],\"sidebar\":[{\"text\":\"Architecture\",\"collapsed\":false,\"items\":[{\"text\":\"Software Architecture\",\"link\":\"/en/software_architecture\"},{\"text\":\"Deployment Topologies\",\"link\":\"/en/deployment_topologies\"},{\"text\":\"Security Model\",\"link\":\"/en/security_model\"},{\"text\":\"Protocol Specification\",\"link\":\"/en/protocol\"}]},{\"text\":\"Operations & Tuning\",\"collapsed\":false,\"items\":[{\"text\":\"Configuration Reference\",\"link\":\"/en/configuration_reference\"},{\"text\":\"Operations Guide\",\"link\":\"/en/operations_guide\"},{\"text\":\"Flow Control\",\"link\":\"/en/flow_control\"},{\"text\":\"Kernel Tuning\",\"link\":\"/en/kernel_tuning\"}]}],\"footer\":{\"copyright\":\"Copyright © 2025 ffutop\"},\"editLink\":{\"pattern\":\"https://github.com/ffutop/DataDiodeConnector/edit/master/docs/:path\",\"text\":\"Edit this page on GitHub\"}}},\"zh-CN\":{\"label\":\"简体中文\",\"lang\":\"zh-CN\",\"link\":\"/zh-CN/\",\"themeConfig\":{\"nav\":[{\"text\":\"首页\",\"link\":\"/zh-CN/\"},{\"text\":\"指南\",\"link\":\"/zh-CN/software_architecture\"},{\"text\":\"配置\",\"link\":\"/zh-CN/configuration_reference\"},{\"text\":\"下载\",\"link\":\"/zh-CN/download\"},{\"text\":\"商业版\",\"link\":\"/zh-CN/commercial\"}],\"sidebar\":[{\"text\":\"架构设计\",\"collapsed\":false,\"items\":[{\"text\":\"软件架构\",\"link\":\"/zh-CN/software_architecture\"},{\"text\":\"部署拓扑\",\"link\":\"/zh-CN/deployment_topologies\"},{\"text\":\"安全模型\",\"link\":\"/zh-CN/security_model\"},{\"text\":\"协议规范\",\"link\":\"/zh-CN/protocol\"}]},{\"text\":\"运维与调优\",\"collapsed\":false,\"items\":[{\"text\":\"配置参考\",\"link\":\"/zh-CN/configuration_reference\"},{\"text\":\"运维指南\",\"link\":\"/zh-CN/operations_guide\"},{\"text\":\"流量控制\",\"link\":\"/zh-CN/flow_control\"},{\"text\":\"内核调优\",\"link\":\"/zh-CN/kernel_tuning\"}]}],\"footer\":{\"copyright\":\"版权所有 © 2025 ffutop\"},\"editLink\":{\"pattern\":\"https://github.com/ffutop/DataDiodeConnector/edit/master/docs/:path\",\"text\":\"在 GitHub 上编辑此页\"},\"docFooter\":{\"prev\":\"上一页\",\"next\":\"下一页\"},\"outline\":{\"label\":\"页面导航\"},\"lastUpdated\":{\"text\":\"最后更新于\"},\"returnToTopLabel\":\"回到顶部\",\"sidebarMenuLabel\":\"菜单\",\"darkModeSwitchLabel\":\"主题\",\"lightModeSwitchTitle\":\"切换到浅色模式\",\"darkModeSwitchTitle\":\"切换到深色模式\"}}},\"scrollOffset\":134,\"cleanUrls\":true,\"additionalConfig\":{}}");</script>
    
  </body>
</html>